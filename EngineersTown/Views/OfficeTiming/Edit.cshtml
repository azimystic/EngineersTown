@model EngineersTown.Models.OfficeTiming

@{
    ViewData["Title"] = "Edit Office Timing";
}

<div class="w-full py-6">
    <div class="flex justify-center">
        <div class="w-full max-w-3xl">
            <div class="bg-white rounded-lg shadow-sm border-0">
                <div class="bg-gradient-to-r from-primary-700 to-primary-600 text-white py-4 px-6 rounded-t-lg">
                    <h3 class="text-xl font-semibold mb-0">
                        <i class="fas fa-edit mr-2"></i>
                        Edit Office Timing - @Model.DayOfWeek
                    </h3>
                </div>

                <div class="p-6">
                    <form asp-action="Edit">
                        <div asp-validation-summary="ModelOnly" class="text-red-600 mb-4"></div>
                        <input type="hidden" asp-for="Id" />
                        <input type="hidden" asp-for="DayOfWeek" />

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Day of Week</label>
                                <input value="@Model.DayOfWeek" class="w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700" readonly />
                            </div>
                            <div>
                                <label asp-for="IsOffDay" class="block text-sm font-semibold text-gray-700 mb-2">Status</label>
                                <div class="flex items-center">
                                    <label class="flex items-center cursor-pointer">
                                        <input asp-for="IsOffDay" class="sr-only" type="checkbox" id="isOffDaySwitch" />
                                        <div class="relative">
                                            <div class="block bg-gray-300 w-14 h-8 rounded-full"></div>
                                            <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition transform"></div>
                                        </div>
                                        <span class="ml-3 text-gray-700">Mark as Off Day</span>
                                    </label>
                                </div>
                                <span asp-validation-for="IsOffDay" class="text-red-600 text-sm mt-1 block"></span>
                            </div>
                        </div>

                        <div id="timingFields" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label asp-for="StartTime" class="block text-sm font-semibold text-gray-700 mb-2">Start Time</label>
                                <input asp-for="StartTime" type="time" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200" />
                                <span asp-validation-for="StartTime" class="text-red-600 text-sm mt-1 block"></span>
                            </div>
                            <div>
                                <label asp-for="EndTime" class="block text-sm font-semibold text-gray-700 mb-2">End Time</label>
                                <input asp-for="EndTime" type="time" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200" />
                                <span asp-validation-for="EndTime" class="text-red-600 text-sm mt-1 block"></span>
                            </div>
                        </div>

                        <div class="flex gap-3 mt-8">
                            <button type="submit" class="bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-md font-medium transition-colors duration-200 transform hover:-translate-y-0.5">
                                <i class="fas fa-save mr-2"></i> Save Changes
                            </button>
                            <a asp-action="Index" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-md font-medium transition-colors duration-200 transform hover:-translate-y-0.5">
                                <i class="fas fa-arrow-left mr-2"></i> Back to List
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        $(document).ready(function() {
            function toggleTimingFields() {
                var isOffDay = $('#isOffDaySwitch').is(':checked');
                var toggle = $('#isOffDaySwitch').closest('label').find('.relative');
                var dot = toggle.find('.dot');
                var bg = toggle.find('.block');
                
                if (isOffDay) {
                    $('#timingFields').hide();
                    $('#timingFields input[type="time"]').prop('required', false);
                    bg.removeClass('bg-gray-300').addClass('bg-primary-600');
                    dot.addClass('translate-x-6');
                } else {
                    $('#timingFields').show();
                    $('#timingFields input[type="time"]').prop('required', true);
                    bg.removeClass('bg-primary-600').addClass('bg-gray-300');
                    dot.removeClass('translate-x-6');
                }
            }

            // Initial state
            toggleTimingFields();

            // Toggle on change
            $('#isOffDaySwitch').change(function() {
                toggleTimingFields();
            });
        });
    </script>

    <style>
        /* Custom toggle switch styling */
        input:checked + .relative .dot {
            transform: translateX(1.5rem);
        }
        
        input:checked + .relative .block {
            background-color: #2563eb;
        }
    </style>
}